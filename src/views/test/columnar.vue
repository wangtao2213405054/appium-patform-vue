<script setup lang="ts">
import { onMounted } from "vue"
import * as echarts from "echarts"

const format = (value: any) => {
  return `${(value / 10000).toFixed(2)}万`
}

const formatTime = (value: string) => {
  return value.split(" ")[1]
}

onMounted(() => {
  const chartDom = document.getElementById("columnar")!
  const myChart = echarts.init(chartDom, "dark")
  const vo = [
    0, 6618500.0, 4495400.0, 5749900.0, 6812000.0, 8021700.0, 8895000.0, 4292800.0, 3733100.0, 6845300.0, 8889800.0,
    4152300.0, 3523700.0, 2727500.0, 3931000.0, 1934900.0, 1461900.0, 1356800.0, 1944600.0, 1128700.0, 2199000.0,
    2172100.0, 1351500.0, 1437800.0, 851200.0, 1486900.0, 640200.0, 996000.0, 904900.0, 857300.0, 999500.0, 1282000.0,
    1648862.0, 1877900.0, 694600.0, 670300.0, 966200.0, 1511900.0, 972100.0, 1095400.0, 555500.0, 1227200.0, 3080600.0,
    908600.0, 1200200.0, 968300.0, 746100.0, 783500.0, 622600.0, 1066800.0, 1541900.0, 577700.0, 896200.0, 863100.0,
    2762900.0, 7590800.0, 2762400.0, 3270100.0, 7473100.0, 1799700.0, 1579000.0, 835200.0, 1283200.0, 1125684.0,
    884816.0, 418500.0, 830745.0, 1015900.0, 1003000.0, 794500.0, 1028315.0, 785200.0, 407900.0, 411700.0, 1099500.0,
    1812700.0, 1098634.0, 1273566.0, 720800.0, 1138600.0, 1551700.0, 3626600.0, 3042873.0, 1659334.0, 1537800.0,
    614500.0, 854800.0, 597300.0, 676200.0, 939200.0, 659700.0, 930200.0, 490600.0, 474600.0, 498600.0, 642700.0,
    795400.0, 688552.0, 754748.0, 458100.0, 495800.0, 480900.0, 376800.0, 1152500.0, 670100.0, 917700.0, 363700.0,
    769500.0, 628200.0, 835700.0, 909900.0, 389300.0, 598300.0, 484800.0, 427400.0, 278000.0, 544100.0, 650177.0,
    908400.0, 354600.0, 8500.0, 1250900.0, 650900.0, 325900.0, 414100.0, 542300.0, 298600.0, 1548780.0, 1895120.0,
    366300.0, 705700.0, 688048.0, 598000.0, 989100.0, 669252.0, 278500.0, 1307200.0, 792700.0, 484100.0, 911300.0,
    618400.0, 698800.0, 864500.0, 410000.0, 1029400.0, 9802401.0, 8910200.0, 4964300.0, 6790650.0, 4668150.0, 3541500.0,
    2883850.0, 1593350.0, 2003000.0, 1609800.0, 1342800.0, 1208800.0, 1452800.0, 750100.0, 626500.0, 978300.0,
    1216900.0, 1248900.0, 1593900.0, 648900.0, 630900.0, 453800.0, 790200.0, 646300.0, 714900.0, 662600.0, 599400.0,
    924800.0, 758900.0, 770300.0, 373100.0, 418900.0, 493800.0, 700300.0, 592200.0, 750800.0, 862600.0, 904500.0,
    1046600.0, 1258954.0, 1370300.0, 1150600.0, 643300.0, 653100.0, 701100.0, 455500.0, 445500.0, 375800.0, 1463400.0,
    386200.0, 533500.0, 618400.0, 637100.0, 724800.0, 1008000.0, 531500.0, 1341400.0, 510100.0, 224500.0, 361000.0,
    395000.0, 450700.0, 384000.0, 499978.0, 336700.0, 303900.0, 531500.0, 680700.0, 502000.0, 510100.0, 489000.0,
    560160.0, 496680.0, 950300.0, 463560.0, 345900.0, 440800.0, 428900.0, 583200.0, 815900.0, 910600.0, 505200.0,
    1534400.0, 905800.0, 1000422.0, 1776500.0, 2091200.0, 2421718.0, 1789400.0, 1263300.0, 1498757.0, 2068200.0,
    2493606.0, 85500.0, 0.0, 0.0, 3191700.0
  ]

  const option = {
    tooltip: {
      trigger: "axis",
      axisPointer: {
        type: "shadow"
      },
      formatter: (params: any[]) => {
        return format(params[0].data)
      }
    },
    grid: {
      left: "3%",
      right: "4%",
      bottom: "3%",
      containLabel: true
    },
    xAxis: [
      {
        type: "category",
        data: [
          "12-21 09:30",
          "12-21 09:31",
          "12-21 09:32",
          "12-21 09:33",
          "12-21 09:34",
          "12-21 09:35",
          "12-21 09:36",
          "12-21 09:37",
          "12-21 09:38",
          "12-21 09:39",
          "12-21 09:40",
          "12-21 09:41",
          "12-21 09:42",
          "12-21 09:43",
          "12-21 09:44",
          "12-21 09:45",
          "12-21 09:46",
          "12-21 09:47",
          "12-21 09:48",
          "12-21 09:49",
          "12-21 09:50",
          "12-21 09:51",
          "12-21 09:52",
          "12-21 09:53",
          "12-21 09:54",
          "12-21 09:55",
          "12-21 09:56",
          "12-21 09:57",
          "12-21 09:58",
          "12-21 09:59",
          "12-21 10:00",
          "12-21 10:01",
          "12-21 10:02",
          "12-21 10:03",
          "12-21 10:04",
          "12-21 10:05",
          "12-21 10:06",
          "12-21 10:07",
          "12-21 10:08",
          "12-21 10:09",
          "12-21 10:10",
          "12-21 10:11",
          "12-21 10:12",
          "12-21 10:13",
          "12-21 10:14",
          "12-21 10:15",
          "12-21 10:16",
          "12-21 10:17",
          "12-21 10:18",
          "12-21 10:19",
          "12-21 10:20",
          "12-21 10:21",
          "12-21 10:22",
          "12-21 10:23",
          "12-21 10:24",
          "12-21 10:25",
          "12-21 10:26",
          "12-21 10:27",
          "12-21 10:28",
          "12-21 10:29",
          "12-21 10:30",
          "12-21 10:31",
          "12-21 10:32",
          "12-21 10:33",
          "12-21 10:34",
          "12-21 10:35",
          "12-21 10:36",
          "12-21 10:37",
          "12-21 10:38",
          "12-21 10:39",
          "12-21 10:40",
          "12-21 10:41",
          "12-21 10:42",
          "12-21 10:43",
          "12-21 10:44",
          "12-21 10:45",
          "12-21 10:46",
          "12-21 10:47",
          "12-21 10:48",
          "12-21 10:49",
          "12-21 10:50",
          "12-21 10:51",
          "12-21 10:52",
          "12-21 10:53",
          "12-21 10:54",
          "12-21 10:55",
          "12-21 10:56",
          "12-21 10:57",
          "12-21 10:58",
          "12-21 10:59",
          "12-21 11:00",
          "12-21 11:01",
          "12-21 11:02",
          "12-21 11:03",
          "12-21 11:04",
          "12-21 11:05",
          "12-21 11:06",
          "12-21 11:07",
          "12-21 11:08",
          "12-21 11:09",
          "12-21 11:10",
          "12-21 11:11",
          "12-21 11:12",
          "12-21 11:13",
          "12-21 11:14",
          "12-21 11:15",
          "12-21 11:16",
          "12-21 11:17",
          "12-21 11:18",
          "12-21 11:19",
          "12-21 11:20",
          "12-21 11:21",
          "12-21 11:22",
          "12-21 11:23",
          "12-21 11:24",
          "12-21 11:25",
          "12-21 11:26",
          "12-21 11:27",
          "12-21 11:28",
          "12-21 11:29",
          "12-21 11:30",
          "12-21 13:00",
          "12-21 13:01",
          "12-21 13:02",
          "12-21 13:03",
          "12-21 13:04",
          "12-21 13:05",
          "12-21 13:06",
          "12-21 13:07",
          "12-21 13:08",
          "12-21 13:09",
          "12-21 13:10",
          "12-21 13:11",
          "12-21 13:12",
          "12-21 13:13",
          "12-21 13:14",
          "12-21 13:15",
          "12-21 13:16",
          "12-21 13:17",
          "12-21 13:18",
          "12-21 13:19",
          "12-21 13:20",
          "12-21 13:21",
          "12-21 13:22",
          "12-21 13:23",
          "12-21 13:24",
          "12-21 13:25",
          "12-21 13:26",
          "12-21 13:27",
          "12-21 13:28",
          "12-21 13:29",
          "12-21 13:30",
          "12-21 13:31",
          "12-21 13:32",
          "12-21 13:33",
          "12-21 13:34",
          "12-21 13:35",
          "12-21 13:36",
          "12-21 13:37",
          "12-21 13:38",
          "12-21 13:39",
          "12-21 13:40",
          "12-21 13:41",
          "12-21 13:42",
          "12-21 13:43",
          "12-21 13:44",
          "12-21 13:45",
          "12-21 13:46",
          "12-21 13:47",
          "12-21 13:48",
          "12-21 13:49",
          "12-21 13:50",
          "12-21 13:51",
          "12-21 13:52",
          "12-21 13:53",
          "12-21 13:54",
          "12-21 13:55",
          "12-21 13:56",
          "12-21 13:57",
          "12-21 13:58",
          "12-21 13:59",
          "12-21 14:00",
          "12-21 14:01",
          "12-21 14:02",
          "12-21 14:03",
          "12-21 14:04",
          "12-21 14:05",
          "12-21 14:06",
          "12-21 14:07",
          "12-21 14:08",
          "12-21 14:09",
          "12-21 14:10",
          "12-21 14:11",
          "12-21 14:12",
          "12-21 14:13",
          "12-21 14:14",
          "12-21 14:15",
          "12-21 14:16",
          "12-21 14:17",
          "12-21 14:18",
          "12-21 14:19",
          "12-21 14:20",
          "12-21 14:21",
          "12-21 14:22",
          "12-21 14:23",
          "12-21 14:24",
          "12-21 14:25",
          "12-21 14:26",
          "12-21 14:27",
          "12-21 14:28",
          "12-21 14:29",
          "12-21 14:30",
          "12-21 14:31",
          "12-21 14:32",
          "12-21 14:33",
          "12-21 14:34",
          "12-21 14:35",
          "12-21 14:36",
          "12-21 14:37",
          "12-21 14:38",
          "12-21 14:39",
          "12-21 14:40",
          "12-21 14:41",
          "12-21 14:42",
          "12-21 14:43",
          "12-21 14:44",
          "12-21 14:45",
          "12-21 14:46",
          "12-21 14:47",
          "12-21 14:48",
          "12-21 14:49",
          "12-21 14:50",
          "12-21 14:51",
          "12-21 14:52",
          "12-21 14:53",
          "12-21 14:54",
          "12-21 14:55",
          "12-21 14:56",
          "12-21 14:57",
          "12-21 14:58",
          "12-21 14:59",
          "12-21 15:00"
        ],
        axisTick: {
          alignWithLabel: true
        },
        axisLabel: {
          formatter: formatTime
        }
      }
    ],
    yAxis: [
      {
        type: "value",
        axisLabel: {
          formatter: format
        }
      }
    ],
    series: [
      {
        name: "成交量",
        type: "bar",
        barWidth: "60%",
        data: vo,
        itemStyle: {
          color: function ({ dataIndex }: any) {
            if (vo[dataIndex] > vo[dataIndex - 1]) {
              /** 黄色 */
              return "#E6A23C"
            } else if (vo[dataIndex] === vo[dataIndex - 1]) {
              return "#FFFFFF"
            } else {
              return "#67C23A"
            }
          }
        }
      }
    ]
  }

  myChart.setOption(option)
})
</script>

<template>
  <div class="box">
    <div id="columnar" style="height: 93vh" />
  </div>
</template>

<style scoped lang="scss">
.box {
  height: 93vh;
  background-color: #262626;
}
</style>
